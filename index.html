<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Telegram Mini App</title>
  <!-- SDK Telegram Mini Apps -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }
    body {
      margin: 0; padding: 16px;
      background: var(--tg-theme-bg-color, #fff);
      color: var(--tg-theme-text-color, #222);
    }
    .card {
      border-radius: 16px; padding: 16px; 
      background: var(--tg-theme-secondary-bg-color, #f2f3f5);
    }
    button {
      border: 0; border-radius: 12px; padding: 12px 16px; 
      font-size: 16px; cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>–ü—Ä–∏–≤–µ—Ç, Telegram Mini App üëã</h2>
  <div class="card">
    <p id="user">–ó–∞–≥—Ä—É–∂–∞—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è‚Ä¶</p>
    <button id="ok">–û–ö</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;

    // –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ä–∞–∑—É "—Ä–∞—Å—à–∏—Ä–∏—Ç—å" WebApp –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É
    tg.expand();

    // –¢–µ–º–∞/—Ü–≤–µ—Ç–∞ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
    // var(--tg-theme-*)
    // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Ö –≤ JS: tg.themeParams

    // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
    const user = tg.initDataUnsafe?.user;
    const p = document.getElementById('user');
    if (user) {
      p.textContent = `–¢—ã: ${user.first_name} (id: ${user.id})`;
    } else {
      p.textContent = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω (–∑–∞–ø—É—Å—Ç–∏ –∏–∑ Telegram).';
    }

    // –ö–Ω–æ–ø–∫–∞ "–û–ö": –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—É—é MainButton –≤–Ω–∏–∑—É
    tg.MainButton.setText('–ì–æ—Ç–æ–≤–æ');
    tg.MainButton.onClick(() => {
      // –û—Ç–ø—Ä–∞–≤–∏–º –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ "–≤ Telegram" (–≤ –±–æ—Ç–∞), –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
      tg.sendData(JSON.stringify({ action: 'ok_pressed', ts: Date.now() }));
      tg.close(); // –∑–∞–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    });
    tg.MainButton.show();

    // –ù–∞ –æ–±—ã—á–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–æ–≤–µ—Å–∏–º —á—Ç–æ-—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ
    document.getElementById('ok').addEventListener('click', () => {
      alert('–ù–∞–∂–∞—Ç–æ –û–ö –≤–Ω—É—Ç—Ä–∏ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã');
    });
  </script>
</body>
</html>
